# Haste-Server with S3 integration

This example will deploy a pastebin service that will use HyperCloud S3 as the
storage backend.

The main file we are going to be deploying is [kubernetes/haste-server/haste-server.yaml],
which will be deploying an instance of [haste-server], configured to store
all data on HyperCloud object storage.

In the file mentioned above, you will need to modify the following env
variables to match your environment:

- `STORAGE_AWS_ENDPOINT`
- `STORAGE_AWS_BUCKET`
- `STORAGE_AWS_KEY_ID`
- `STORAGE_AWS_KEY_SECRET`

The Ingress to this service is configured with SSL certificates automatically
generated by Let's Encrypt. For this to work, we will need to install
`cert-manager` first into the Kubernetes cluster.

To simplify all this, you can run the following Ansible script which will deploy
everything. Again, from the `ansible/` folder.

    ansible-playbook -i inventory/hosts deploy_haste_kubernetes.yaml

[kubernetes/haste-server/haste-server.yaml]: kubernetes/haste-server/haste-server.yaml
[haste-server]: https://github.com/toptal/haste-server
